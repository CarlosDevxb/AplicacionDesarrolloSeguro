<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Perfil ‚Äî TecNM Saltillo</title>
    <link rel="stylesheet" href="PerfilEdits.css">
</head>
<body>
    <button id="menuBtn" class="menu-toggle"><i class="fa-solid fa-bars"></i></button>

    <div id="overlay" class="overlay"></div>
    <!-- Contenedor para mensajes de usuario -->
    <div id="message-box" class="message-box"></div>

    <nav id="sidebar" class="sidebar">
        <div class="user-box">
            <img src="imagen/Foto_Perfl.png" alt="Foto de perfil" class="user-avatar">
            <h4>[Nombre del Alumno]</h4>
        </div>
        <ul>
            <li><a href="#"><i class="fas fa-home"></i> Inicio</a></li>
            <li><a href="#"><i class="fas fa-user-circle"></i> Mi Perfil</a></li>
            <li><a href="#"><i class="fas fa-graduation-cap"></i> Mi Carrera</a></li>
            <li><a href="#"><i class="fas fa-book"></i> Ret√≠cula</a></li>
            <li class="toggle">
                <span><i class="fas fa-tasks"></i> Materias</span>
                <ul class="submenu">
                    <li><a href="#">Calificaciones</a></li>
                    <li><a href="#">Horario</a></li>
                </ul>
            </li>
            <li><a href="#"><i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n</a></li>
        </ul>
    </nav>

    <header class="barra-superior">
        <div class="logo">
            <img src="imagen/tecnm-logoV2.png" alt="Logo de TecNM" style="height:50px; width:50px;">
            <span>Instituto Tecnol√≥gico Chafa</span>
        </div>
        <div class="perfil-usuario-menu">
            <span>üë§ [Nombre del Alumno]</span>
            <img src="imagen/Foto_Perfl.png" alt="Foto de perfil" class="foto-perfil-chica">
        </div>
    </header>

    <main class="perfil-main">
        <form id="perfil-form" method="post" enctype="multipart/form-data">
            <div class="profile-sections-grid">
                <section class="seccion-form">
                    <h3>Datos personales</h3>
                    <p class="instrucciones">Modifica tu informaci√≥n personal y de contacto.</p>
                    <div class="form-grid">
                        <div class="campo-foto">
                            <div class="foto-perfil-editar">
                                <img src="imagen/Foto_Perfl.png" alt="Foto de perfil">
                            </div>
                            <div>
                                <label for="foto">Fotograf√≠a <a href="#" id="file-trigger">Elegir archivo</a></label>
                                <input type="file" id="foto" name="foto" style="display: none;">
                                <p class="ayuda-foto">Sube una foto personal, de frente, con el rostro reconocible.</p>
                            </div>
                        </div>
                        <label>Nombre completo<input type="text" name="nombre_completo"></label>
                        <label>Correo electr√≥nico<input type="email" name="correo"></label>
                        <label>Tel√©fono<input type="tel" name="telefono"></label>
                        <label>Direcci√≥n<input type="text" name="direccion" placeholder="Calle, n√∫mero, colonia, etc."></label>
                    </div>
                </section>

                <section class="seccion-form">
                    <h3>Contrase√±a</h3>
                    <div class="form-grid">
                        <label>Contrase√±a actual
                            <input type="password" name="contrasena_actual">
                        </label>
                        <label>Nueva contrase√±a
                            <input type="password" id="nueva_contrasena" name="nueva_contrasena">
                        </label>
                        <label>Confirmar nueva contrase√±a
                            <input type="password" id="confirmar_contrasena" name="confirmar_contrasena">
                        </label>
                    </div>
                </section>
            </div>

            <section id="acciones-editar">
                <a href="perfil-vista.html" class="boton-volver">
                    Atr√°s
                </a>
                <button type="submit" class="boton-guardar">
                    Guardar
                </button>
            </section>
        </form>
    </main>

    <!-- C√≥digo JavaScript integrado en el HTML -->
    <script>
        // L√≥gica del men√∫ lateral y submen√∫
        const menuBtn = document.getElementById("menuBtn");
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("overlay");
        const toggles = document.querySelectorAll(".toggle");

        // Funci√≥n para mostrar mensajes de notificaci√≥n
        function showMessage(message, type) {
            const messageBox = document.getElementById("message-box");
            messageBox.textContent = message;
            messageBox.className = `message-box visible ${type}`;
            setTimeout(() => {
                messageBox.classList.remove("visible");
            }, 3000);
        }

        // Evento para abrir y cerrar el men√∫
        menuBtn.addEventListener("click", () => {
            sidebar.classList.toggle("active");
            overlay.classList.toggle("active");
        });

        // Evento para cerrar el men√∫ haciendo click fuera
        overlay.addEventListener("click", () => {
            sidebar.classList.remove("active");
            overlay.classList.remove("active");
        });

        // Evento para los submen√∫s
        toggles.forEach(toggle => {
            toggle.addEventListener("click", () => {
                const submenu = toggle.querySelector(".submenu");
                if (submenu) {
                    toggle.classList.toggle("active");
                    submenu.style.display = submenu.style.display === "block" ? "none" : "block";
                }
            });
        });

        // L√≥gica de validaci√≥n del formulario de contrase√±a
        const perfilForm = document.getElementById("perfil-form");
        const nuevaContrasena = document.getElementById("nueva_contrasena");
        const confirmarContrasena = document.getElementById("confirmar_contrasena");

        perfilForm.addEventListener("submit", (e) => {
            // Previene el env√≠o del formulario por defecto
            e.preventDefault();

            // L√≥gica para verificar que los campos de contrase√±a no est√©n vac√≠os
            if (nuevaContrasena.value || confirmarContrasena.value) {
                // Si el usuario quiere cambiar la contrase√±a, las dos deben coincidir
                if (nuevaContrasena.value !== confirmarContrasena.value) {
                    showMessage("Las contrase√±as no coinciden. Por favor, rev√≠salas.", "error");
                    return; // Detiene el proceso
                }
            }

            // Aqu√≠ ir√≠a el c√≥digo para enviar los datos al servidor (backend)
            // Por ahora, solo simulamos un env√≠o exitoso.
            console.log("Formulario enviado. Contrase√±as coinciden.");
            showMessage("Perfil actualizado con √©xito.", "success");
        });

        // L√≥gica para el bot√≥n de subir foto
        const fileTrigger = document.getElementById("file-trigger");
        const fileInput = document.getElementById("foto");

        fileTrigger.addEventListener("click", (e) => {
            e.preventDefault();
            fileInput.click();
        });
    </script>
</body>
</html>
